{% extends "layout.html" %}
{% block body %}
<h1 class="page-header">Matchs du Ladder</h1>

<div class="container">
    <table id="matches" class="display cell-border stripe" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th class="dt-head-center">MatchID</th>
                <th>Date</th>
                <th class="dt-head-center">État</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>
{% endblock %}

{% block endscripts %}
<script>
    $(document).ready(function() {
        $('#matches').DataTable({
            "paging": true,
            "ordering": false,
            "lengthChange": false,
            "searching": false,
            "pageLength": 20,
            "info": false,
            "language": {
                "loadingRecords": "Chargement...",
                "processing": "Chargement...",
                "emptyTable": "Aucun résultat.",
                "search": "Rechercher:",
                "paginate": {
                    "first":      "Premier",
                    "last":       "Dernier",
                    "next":       "Suivant",
                    "previous":   "Précédent"
                }
            },
            "processing": true,
            "serverSide": true,
            "ajax": "{{ url_for('ladder_blueprint.api_matches') }}",
            "columnDefs": [
                { className: "dt-body-center", "width": "200px", "targets": 0 },
                { className: "dt-body-center", "width": "200px", "targets": 2 }
            ]
        });

        $('#matches tbody').on( 'click', 'tr', function () {
            window.location = "{{ url_for('ladder_blueprint.match', match_id=0) }}" + $(this).children()[0].textContent;
        });
    } );
</script>
{% endblock %}